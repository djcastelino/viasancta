{
  "name": "Jesus in OT - Reflection Generator",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "jesus-in-ot-reflection",
        "options": {}
      },
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [250, 300],
      "webhookId": "jesus-ot-reflection"
    },
    {
      "parameters": {
        "model": "llama-3.3-70b-versatile",
        "messages": {
          "messageValues": [
            {
              "role": "system",
              "message": "You are a warm, reverent Catholic theologian and spiritual guide. Your role is to help the faithful encounter Jesus Christ in the Old Testament through thoughtful, accessible reflections that connect ancient Scripture to modern Catholic life. You speak with the wisdom of the Church Fathers, the clarity of the Catechism, and the heart of a pastor who loves souls."
            },
            {
              "role": "user",
              "message": "=Create a thoughtful 2-3 minute reflection on how this Old Testament passage points to Jesus Christ.\n\nPASSAGE: {{ $json.body.title }}\nREFERENCE: {{ $json.body.reference }}\nTEXT: {{ $json.body.otText }}\nCONTEXT: {{ $json.body.historicalContext }}\nHOW IT POINTS TO JESUS: {{ $json.body.howItPointsToJesus }}\n\nGuidelines:\n1. Begin with wonder at God's providence in revealing Christ throughout Scripture\n2. Explain the typology or prophecy in accessible, beautiful language\n3. Connect to the Mass, sacraments, or Catholic devotional life where relevant\n4. End with a practical invitation to encounter Jesus today\n5. Aim for 250-350 words (2-3 minutes spoken)\n6. Use \"you\" and \"we\" to make it personal\n7. Reverent but warm tone - like a beloved priest giving a homily\n8. Write for everyday Catholics\n\nGenerate the reflection now:"
            }
          ]
        },
        "options": {
          "temperature": 0.7,
          "maxTokens": 500
        }
      },
      "name": "Groq - Generate Reflection",
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "position": [450, 300]
    },
    {
      "parameters": {
        "voice": "en-US-AndrewMultilingualNeural",
        "text": "={{ $json.message.content }}",
        "options": {
          "rate": "0.95",
          "format": "audio-16khz-32kbitrate-mono-mp3"
        }
      },
      "name": "Azure Text-to-Speech",
      "type": "n8n-nodes-base.microsoftAzure.textToSpeech",
      "position": [650, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"reflectionText\": $('Groq - Generate Reflection').item.json.message.content, \"audioUrl\": \"data:audio/mpeg;base64,\" + $binary.data.toString('base64') } }}"
      },
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "position": [850, 300]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [[{ "node": "Groq - Generate Reflection", "type": "main", "index": 0 }]]
    },
    "Groq - Generate Reflection": {
      "main": [[{ "node": "Azure Text-to-Speech", "type": "main", "index": 0 }]]
    },
    "Azure Text-to-Speech": {
      "main": [[{ "node": "Respond to Webhook", "type": "main", "index": 0 }]]
    }
  },
  "settings": {},
  "staticData": null,
  "tags": [],
  "triggerCount": 1
}
